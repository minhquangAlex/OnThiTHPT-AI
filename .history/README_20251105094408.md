# OnThiTHPT AI - Ná»n táº£ng Ã”n thi THPT Full-Stack TÃ­ch há»£p AI

## ğŸ“ Tá»•ng Quan Dá»± Ãn

**OnThiTHPT AI** lÃ  má»™t á»©ng dá»¥ng web full-stack Ä‘Æ°á»£c xÃ¢y dá»±ng vá»›i React (frontend) vÃ  Node.js/Express (backend), mÃ´ phá»ng má»™t ná»n táº£ng Ã´n thi Tá»‘t nghiá»‡p Trung há»c Phá»• thÃ´ng thÃ´ng minh, Ä‘Æ°á»£c trang bá»‹ TrÃ­ tuá»‡ nhÃ¢n táº¡o (AI) tá»« Google Gemini. Má»¥c tiÃªu cá»§a dá»± Ã¡n lÃ  cung cáº¥p má»™t mÃ´i trÆ°á»ng há»c táº­p hiá»‡n Ä‘áº¡i, tÆ°Æ¡ng tÃ¡c vÃ  hoÃ n chá»‰nh cho há»c sinh.

KhÃ¡c vá»›i phiÃªn báº£n demo ban Ä‘áº§u, dá»± Ã¡n nÃ y Ä‘Ã£ Ä‘Æ°á»£c nÃ¢ng cáº¥p vá»›i má»™t **backend thá»±c sá»±**, sá»­ dá»¥ng cÆ¡ sá»Ÿ dá»¯ liá»‡u MongoDB Ä‘á»ƒ quáº£n lÃ½ ngÆ°á»i dÃ¹ng, mÃ´n há»c, vÃ  cÃ¢u há»i má»™t cÃ¡ch bá»n vá»¯ng.

## âœ¨ TÃ­nh nÄƒng ná»•i báº­t

- ğŸ” **XÃ¡c thá»±c ngÆ°á»i dÃ¹ng an toÃ n:** ÄÄƒng nháº­p vÃ  quáº£n lÃ½ phiÃªn lÃ m viá»‡c thÃ´ng qua JSON Web Tokens (JWT).
- ğŸ“š **Quáº£n lÃ½ dá»¯ liá»‡u Ä‘á»™ng:** NgÃ¢n hÃ ng cÃ¢u há»i vÃ  mÃ´n há»c Ä‘Æ°á»£c quáº£n lÃ½ trong cÆ¡ sá»Ÿ dá»¯ liá»‡u MongoDB.
- ğŸ§  **Táº¡o Ä‘á» thi báº±ng AI:** Sá»­ dá»¥ng Google Gemini Ä‘á»ƒ táº¡o nhanh má»™t bá»™ Ä‘á» tráº¯c nghiá»‡m ngáº«u nhiÃªn.
- ğŸ¤– **Gia sÆ° AI 24/7:** Chatbot trá»£ lÃ½ giáº£i thÃ­ch chi tiáº¿t Ä‘Ã¡p Ã¡n vÃ  kiáº¿n thá»©c liÃªn quan.
- ğŸ“Š **Thá»‘ng kÃª trá»±c quan:** Xem láº¡i káº¿t quáº£ bÃ i lÃ m chi tiáº¿t vá»›i biá»ƒu Ä‘á»“ vÃ  giáº£i thÃ­ch cáº·n káº½.
- â±ï¸ **Thi thá»­ tÃ­nh giá»:** Tráº£i nghiá»‡m lÃ m bÃ i thi dÆ°á»›i Ã¡p lá»±c thá»i gian thá»±c.
- ğŸ‘¨â€ğŸ’» **Giao diá»‡n quáº£n trá»‹:** Trang quáº£n trá»‹ máº«u Ä‘á»ƒ xem tá»•ng quan vÃ  lÃ  ná»n táº£ng Ä‘á»ƒ phÃ¡t triá»ƒn cÃ¡c tÃ­nh nÄƒng quáº£n lÃ½ ná»™i dung.

## ğŸš€ CÃ´ng nghá»‡ sá»­ dá»¥ng

### Frontend

- **Framework:** React (v19)
- **NgÃ´n ngá»¯:** TypeScript
- **Styling:** Tailwind CSS
- **Routing:** React Router (`HashRouter`)
- **Quáº£n lÃ½ tráº¡ng thÃ¡i:** Zustand
- **Biá»ƒu Ä‘á»“:** Recharts

### Backend

- **Runtime:** Node.js
- **Framework:** Express.js
- **NgÃ´n ngá»¯:** TypeScript
- **CÆ¡ sá»Ÿ dá»¯ liá»‡u:** MongoDB vá»›i Mongoose ODM
- **XÃ¡c thá»±c:** JSON Web Tokens (JWT) & bcryptjs
- **Biáº¿n mÃ´i trÆ°á»ng:** `dotenv`

### Dá»‹ch vá»¥ ngoÃ i

- **AI:** Google Gemini API (`@google/genai`)

## ğŸ“‚ Cáº¥u trÃºc Chi tiáº¿t vÃ  Giáº£i thÃ­ch File

Dá»± Ã¡n Ä‘Æ°á»£c chia thÃ nh hai pháº§n chÃ­nh: `frontend` (mÃ£ nguá»“n trong thÆ° má»¥c `/src`) vÃ  `backend` (mÃ£ nguá»“n trong thÆ° má»¥c `/backend`).

---

### **Backend (`/backend`)**

ÄÃ¢y lÃ  nÆ¡i xá»­ lÃ½ logic nghiá»‡p vá»¥, giao tiáº¿p vá»›i cÆ¡ sá»Ÿ dá»¯ liá»‡u vÃ  cung cáº¥p API cho frontend. NÃ³ hoáº¡t Ä‘á»™ng nhÆ° "bá»™ nÃ£o" cá»§a á»©ng dá»¥ng.

- `package.json`: Äá»‹nh nghÄ©a thÃ´ng tin dá»± Ã¡n, cÃ¡c gÃ³i phá»¥ thuá»™c (dependencies) vÃ  cÃ¡c cÃ¢u lá»‡nh (scripts) nhÆ° `dev` (Ä‘á»ƒ cháº¡y server), `data:import` (Ä‘á»ƒ náº¡p dá»¯ liá»‡u máº«u).
- `.env.example`: File máº«u cho cÃ¡c biáº¿n mÃ´i trÆ°á»ng. Báº¡n cáº§n táº¡o má»™t file `.env` dá»±a trÃªn file nÃ y Ä‘á»ƒ cung cáº¥p cÃ¡c thÃ´ng tin nháº¡y cáº£m nhÆ° chuá»—i káº¿t ná»‘i database, mÃ£ bÃ­ máº­t JWT.
- `tsconfig.json`: Cáº¥u hÃ¬nh cho trÃ¬nh biÃªn dá»‹ch TypeScript, chá»‰ Ä‘á»‹nh cÃ¡ch mÃ£ TS Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i thÃ nh mÃ£ JS mÃ  Node.js cÃ³ thá»ƒ cháº¡y.
- **/src/server.ts**: **TrÃ¡i tim cá»§a backend**. File nÃ y khá»Ÿi táº¡o server Express, Ã¡p dá»¥ng cÃ¡c middleware (nhÆ° CORS, express.json), káº¿t ná»‘i tá»›i database, liÃªn káº¿t cÃ¡c routes, vÃ  báº¯t Ä‘áº§u láº¯ng nghe yÃªu cáº§u tá»« client.
- **/src/config/db.ts**: Chá»©a logic káº¿t ná»‘i á»©ng dá»¥ng vá»›i cÆ¡ sá»Ÿ dá»¯ liá»‡u MongoDB báº±ng chuá»—i káº¿t ná»‘i tá»« file `.env`.
- **/src/models/**: Äá»‹nh nghÄ©a cáº¥u trÃºc (Schema) cá»§a dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c lÆ°u trong MongoDB.
  - `User.ts`: Äá»‹nh nghÄ©a schema cho ngÆ°á»i dÃ¹ng, bao gá»“m cáº£ middleware Ä‘á»ƒ tá»± Ä‘á»™ng mÃ£ hÃ³a máº­t kháº©u trÆ°á»›c khi lÆ°u.
  - `Subject.ts`: Äá»‹nh nghÄ©a schema cho cÃ¡c mÃ´n há»c.
  - `Question.ts`: Äá»‹nh nghÄ©a schema cho cÃ¡c cÃ¢u há»i trong ngÃ¢n hÃ ng Ä‘á».
- **/src/controllers/**: Chá»©a toÃ n bá»™ logic xá»­ lÃ½ cho má»—i yÃªu cáº§u. Khi má»™t route Ä‘Æ°á»£c gá»i, nÃ³ sáº½ chuyá»ƒn tiáº¿p yÃªu cáº§u Ä‘áº¿n má»™t hÃ m trong controller.
  - `authController.ts`: Xá»­ lÃ½ logic Ä‘Äƒng kÃ½, Ä‘Äƒng nháº­p, xÃ¡c thá»±c máº­t kháº©u vÃ  táº¡o JWT token.
  - `subjectController.ts`: Xá»­ lÃ½ logic Ä‘á»ƒ láº¥y danh sÃ¡ch mÃ´n há»c tá»« database.
  - `questionController.ts`: Xá»­ lÃ½ logic Ä‘á»ƒ láº¥y cÃ¢u há»i theo tá»«ng mÃ´n há»c.
- **/src/routes/**: Äá»‹nh nghÄ©a cÃ¡c API endpoints (Ä‘Æ°á»ng dáº«n URL). ChÃºng Ã¡nh xáº¡ má»™t URL vÃ  má»™t phÆ°Æ¡ng thá»©c HTTP (GET, POST) tá»›i má»™t hÃ m xá»­ lÃ½ cá»¥ thá»ƒ trong controller.
- **/src/data/**: Chá»©a cÃ¡c file dá»¯ liá»‡u máº«u (users, subjects, questions) Ä‘á»ƒ khá»Ÿi táº¡o database.
- **/src/seeder.ts**: Má»™t script tiá»‡n Ã­ch, khÃ´ng pháº£i lÃ  má»™t pháº§n cá»§a á»©ng dá»¥ng chÃ­nh. NÃ³ Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ tá»± Ä‘á»™ng náº¡p (hoáº·c xÃ³a) dá»¯ liá»‡u máº«u vÃ o database, giÃºp viá»‡c cÃ i Ä‘áº·t mÃ´i trÆ°á»ng phÃ¡t triá»ƒn láº§n Ä‘áº§u trá»Ÿ nÃªn cá»±c ká»³ nhanh chÃ³ng.

---

### **Frontend (ThÆ° má»¥c gá»‘c & `/src`)**

ÄÃ¢y lÃ  pháº§n giao diá»‡n mÃ  ngÆ°á»i dÃ¹ng tÆ°Æ¡ng tÃ¡c trá»±c tiáº¿p trÃªn trÃ¬nh duyá»‡t. NÃ³ chá»‹u trÃ¡ch nhiá»‡m hiá»ƒn thá»‹ dá»¯ liá»‡u vÃ  gá»­i yÃªu cáº§u cá»§a ngÆ°á»i dÃ¹ng Ä‘áº¿n backend.

- `index.html`: File HTML gá»‘c duy nháº¥t cá»§a á»©ng dá»¥ng. NÃ³ chá»©a tháº» `<div id="root"></div>` nÆ¡i toÃ n bá»™ á»©ng dá»¥ng React sáº½ Ä‘Æ°á»£c "gáº¯n" vÃ o.
- **/src/index.tsx**: **Äiá»ƒm khá»Ÿi Ä‘áº§u cá»§a frontend**. File nÃ y tÃ¬m Ä‘áº¿n `div#root` vÃ  render component `App` vÃ o Ä‘Ã³, khá»Ÿi cháº¡y á»©ng dá»¥ng React.
- **/src/App.tsx**: Component gá»‘c cá»§a á»©ng dá»¥ng. NÃ³ thiáº¿t láº­p `HashRouter` Ä‘á»ƒ quáº£n lÃ½ viá»‡c Ä‘iá»u hÆ°á»›ng trang vÃ  Ä‘á»‹nh nghÄ©a táº¥t cáº£ cÃ¡c routes chÃ­nh (vÃ­ dá»¥: `/login`, `/dashboard`). CÃ¡c component toÃ n cá»¥c nhÆ° `Header` vÃ  `AITutor` cÅ©ng Ä‘Æ°á»£c Ä‘áº·t á»Ÿ Ä‘Ã¢y.
- **/src/pages/**: Má»—i file trong thÆ° má»¥c nÃ y Ä‘áº¡i diá»‡n cho má»™t trang hoÃ n chá»‰nh cá»§a á»©ng dá»¥ng.
  - `LoginPage.tsx`: Chá»©a form Ä‘Äƒng nháº­p, xá»­ lÃ½ viá»‡c gá»i API login Ä‘áº¿n backend vÃ  cáº­p nháº­t tráº¡ng thÃ¡i ngÆ°á»i dÃ¹ng.
  - `DashboardPage.tsx`: Trang chÃ­nh sau khi Ä‘Äƒng nháº­p, hiá»ƒn thá»‹ danh sÃ¡ch mÃ´n há»c.
  - `QuizPage.tsx`: Giao diá»‡n lÃ m bÃ i kiá»ƒm tra, quáº£n lÃ½ cÃ¢u há»i, cÃ¢u tráº£ lá»i vÃ  Ä‘á»“ng há»“ Ä‘áº¿m ngÆ°á»£c.
- **/src/components/**: Chá»©a cÃ¡c thÃ nh pháº§n giao diá»‡n nhá», cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng trÃªn nhiá»u trang.
  - `Header.tsx`: Thanh Ä‘iá»u hÆ°á»›ng trÃªn cÃ¹ng.
  - `Button.tsx`, `Card.tsx`, `Spinner.tsx`: CÃ¡c khá»‘i xÃ¢y dá»±ng UI cÆ¡ báº£n.
  - `AITutor.tsx`: Chat-widget ná»•i, giao tiáº¿p vá»›i Gemini API Ä‘á»ƒ cung cáº¥p giáº£i thÃ­ch.
- **/src/services/**: Lá»›p giao tiáº¿p vá»›i cÃ¡c dá»‹ch vá»¥ bÃªn ngoÃ i (API).
  - `api.ts`: **Cáº§u ná»‘i quan trá»ng nháº¥t vá»›i backend**. NÃ³ táº­p trung táº¥t cáº£ cÃ¡c hÃ m `fetch` Ä‘á»ƒ gá»i Ä‘áº¿n API cá»§a server Node.js. Viá»‡c nÃ y giÃºp mÃ£ nguá»“n á»Ÿ cÃ¡c component gá»n gÃ ng hÆ¡n.
  - `geminiService.ts`: TÆ°Æ¡ng tá»± `api.ts`, nhÆ°ng dÃ nh riÃªng cho viá»‡c giao tiáº¿p vá»›i API cá»§a Google Gemini.
- **/src/store/**: Quáº£n lÃ½ tráº¡ng thÃ¡i toÃ n cá»¥c cá»§a á»©ng dá»¥ng báº±ng Zustand.
  - `useAuthStore.ts`: LÆ°u trá»¯ thÃ´ng tin ngÆ°á»i dÃ¹ng vÃ  token JWT. NÃ³ sá»­ dá»¥ng middleware `persist` Ä‘á»ƒ lÆ°u tráº¡ng thÃ¡i vÃ o `localStorage`, giÃºp ngÆ°á»i dÃ¹ng khÃ´ng bá»‹ Ä‘Äƒng xuáº¥t sau khi táº£i láº¡i trang.
  - `useQuizStore.ts`: Quáº£n lÃ½ tráº¡ng thÃ¡i cá»§a phiÃªn lÃ m bÃ i quiz hiá»‡n táº¡i (danh sÃ¡ch cÃ¢u há»i, cÃ¢u tráº£ lá»i, káº¿t quáº£...). Tráº¡ng thÃ¡i nÃ y lÃ  táº¡m thá»i vÃ  sáº½ Ä‘Æ°á»£c reset má»—i khi báº¯t Ä‘áº§u má»™t bÃ i quiz má»›i.
- **/src/hooks/**: Chá»©a cÃ¡c React hook tÃ¹y chá»‰nh Ä‘á»ƒ tÃ¡i sá»­ dá»¥ng logic.
  - `useTimer.ts`: Logic cho Ä‘á»“ng há»“ Ä‘áº¿m ngÆ°á»£c trong trang `QuizPage`.
- **/src/types.ts**: NÆ¡i táº­p trung Ä‘á»‹nh nghÄ©a cÃ¡c kiá»ƒu dá»¯ liá»‡u TypeScript (`User`, `Question`...). GiÃºp Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n vÃ  giáº£m lá»—i trong toÃ n bá»™ dá»± Ã¡n.

## ğŸ› ï¸ CÃ i Ä‘áº·t vÃ  Cháº¡y dá»± Ã¡n

### **YÃªu cáº§u**

1. **Node.js vÃ  npm:** Cáº§n thiáº¿t Ä‘á»ƒ cháº¡y cáº£ backend vÃ  frontend.
2. **MongoDB:** Báº¡n nÃªn sá»­ dá»¥ng má»™t tÃ i khoáº£n miá»…n phÃ­ trÃªn **[MongoDB Atlas](https://www.mongodb.com/cloud/atlas)** (dá»‹ch vá»¥ cloud) Ä‘á»ƒ tiá»‡n lá»£i nháº¥t.
3. **Google AI Studio API Key:**
   * Truy cáº­p [Google AI Studio](https://aistudio.google.com/app/apikey) Ä‘á»ƒ táº¡o API key.

### **BÆ°á»›c 1: CÃ i Ä‘áº·t Backend**

1. **Má»Ÿ má»™t terminal** vÃ  di chuyá»ƒn vÃ o thÆ° má»¥c `backend`:

   ```bash
   cd backend
   ```
2. **CÃ i Ä‘áº·t cÃ¡c gÃ³i phá»¥ thuá»™c:**

   ```bash
   npm install
   ```
3. **Thiáº¿t láº­p MongoDB Atlas:**

   * ÄÄƒng kÃ½ tÃ i khoáº£n MongoDB Atlas, táº¡o má»™t project vÃ  má»™t cluster (chá»n gÃ³i M0 miá»…n phÃ­).
   * Trong má»¥c **Database Access**, táº¡o má»™t user vÃ  máº­t kháº©u cho database.
   * Trong má»¥c **Network Access**, thÃªm Ä‘á»‹a chá»‰ IP `0.0.0.0/0` Ä‘á»ƒ cho phÃ©p truy cáº­p tá»« má»i nÆ¡i (hoáº·c thÃªm IP hiá»‡n táº¡i cá»§a báº¡n).
   * Vá» láº¡i trang **Database**, nháº¥n "Connect", chá»n "Drivers", vÃ  sao chÃ©p chuá»—i káº¿t ná»‘i (Connection String).
4. **Táº¡o file biáº¿n mÃ´i trÆ°á»ng:**

   * Trong thÆ° má»¥c `backend`, sao chÃ©p file `.env.example` thÃ nh file `.env`.
   * Má»Ÿ file `.env` vÃ  cáº­p nháº­t cÃ¡c giÃ¡ trá»‹:
     - `MONGO_URI`: DÃ¡n chuá»—i káº¿t ná»‘i báº¡n vá»«a sao chÃ©p tá»« MongoDB Atlas. **Nhá»› thay `<password>` báº±ng máº­t kháº©u database báº¡n Ä‘Ã£ táº¡o.**
     - `JWT_SECRET`: Thay báº±ng má»™t chuá»—i bÃ­ máº­t ngáº«u nhiÃªn cá»§a riÃªng báº¡n (vÃ­ dá»¥: `mysupersecretkey123`).
5. **Náº¡p dá»¯ liá»‡u máº«u vÃ o Database (BÆ°á»›c quan trá»ng):**

   * Äá»ƒ á»©ng dá»¥ng cÃ³ dá»¯ liá»‡u ban Ä‘áº§u (tÃ i khoáº£n, mÃ´n há»c, cÃ¢u há»i), hÃ£y cháº¡y lá»‡nh sau trong terminal (váº«n á»Ÿ thÆ° má»¥c `backend`):

   ```bash
   npm run data:import
   ```

   * Lá»‡nh nÃ y sáº½ xÃ³a dá»¯ liá»‡u cÅ© vÃ  thÃªm vÃ o dá»¯ liá»‡u máº«u. Báº¡n sáº½ cÃ³ sáºµn 2 tÃ i khoáº£n:
     - Admin: `admin` / `adminpassword`
     - Student: `student` / `studentpassword`
6. **Cháº¡y server backend:**

   ```bash
   npm run dev
   ```

   Server sáº½ khá»Ÿi Ä‘á»™ng vÃ  cháº¡y táº¡i `http://localhost:5001`.

### **BÆ°á»›c 2: Cháº¡y Frontend**

1. **Má»Ÿ má»™t terminal má»›i** (giá»¯ cho terminal backend váº«n cháº¡y) vÃ  Ä‘á»©ng á»Ÿ thÆ° má»¥c **gá»‘c** cá»§a dá»± Ã¡n.
2. **Thiáº¿t láº­p API Key cho Gemini:**
   * á»¨ng dá»¥ng Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ Ä‘á»c API key tá»« biáº¿n mÃ´i trÆ°á»ng `process.env.API_KEY`. Khi cháº¡y trÃªn cÃ¡c ná»n táº£ng nhÆ° AI Studio, biáº¿n nÃ y sáº½ Ä‘Æ°á»£c cung cáº¥p tá»± Ä‘á»™ng.
3. **Cháº¡y server tÄ©nh cho frontend:**
   * CÃ i Ä‘áº·t `serve` náº¿u báº¡n chÆ°a cÃ³:
     ```bash
     npm install 
     ```
   * Cháº¡y server:
     ```bash
     npm run dev
     ```
4. **Truy cáº­p á»©ng dá»¥ng:**
   * Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p vÃ o Ä‘á»‹a chá»‰ Ä‘Æ°á»£c `serve` cung cáº¥p (thÆ°á»ng lÃ  `http://localhost:3000`).
   * Frontend sáº½ tá»± Ä‘á»™ng káº¿t ná»‘i Ä‘áº¿n backend Ä‘ang cháº¡y á»Ÿ `http://localhost:5001`. ÄÄƒng nháº­p vá»›i má»™t trong cÃ¡c tÃ i khoáº£n máº«u á»Ÿ trÃªn Ä‘á»ƒ báº¯t Ä‘áº§u!
     (Nhá»¯ng lá»—i cáº§n chá»‰nh: Trang Xem chi tiáº¿t sáº½ hiá»ƒn thá»‹ lÃ : KhÃ´ng cÃ³ káº¿t quáº£ hiá»ƒn thá»‹ náº¿u restart, báº£ng thÃ´ng kÃª cÃ¢u há»i sáº½ bá»‹ xÃ³a khi reset fe vÃ  be)
